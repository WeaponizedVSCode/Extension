# Agent Instructions (Codex CLI)

This repo is a VS Code extension written in TypeScript, with a few small Python generator scripts.

## Project layout

- `src/`: extension source
  - `src/features/**`: feature modules (most work goes here)
  - `src/platform/vscode/**`: VS Code integration helpers (logger/context/etc.)
  - 'src/core/**': core abstractions (for model like Host, UserCredential, etc.)
- `resources/**`: template/static inputs used by generators
- `scripts/**`: maintenance/generator scripts (Python/TS)

## Package manager / commands

- Use `pnpm` (lockfile: `pnpm-lock.yaml`).
- Common scripts (see `package.json`):
  - `pnpm run gen-setup` → regenerates `src/features/setup/assets.ts`
  - `pnpm run gen-report-assets` → regenerates `src/features/reports/assets.ts`
  - `pnpm run compile` / `pnpm run package` / `pnpm run lint`

If network access is restricted, do not add dependencies or run install commands without explicit approval.

## Generated code (do not hand-edit)

- `src/features/setup/assets.ts` is generated by `scripts/gen-setup.py`.
- `src/features/reports/assets.ts` is generated by `scripts/gen-report-assets.py`.

When changing inputs under `resources/**`, update the generator if needed and regenerate the corresponding `assets.ts`.

## TypeScript conventions

- Keep `strict` TypeScript compliance in mind (`tsconfig.json` enables strictness).
- Prefer `import type { ... }` for type-only imports.
- Avoid `any` unless there is no reasonable alternative; prefer narrow local types.
- Keep changes focused; avoid broad refactors unrelated to the request.
- Favor small, well-named functions over large monolithic ones.
- Leave comments for non-obvious logic or decisions.

## Dependency caveats

- Do not edit files under `node_modules/**`.
- If build/typecheck fails due to upstream `foam-vscode` types, document it, but don’t patch dependencies unless explicitly requested.

## Git hygiene

- DO NOT OPERATION anything with git, including commits, branches, merges, rebases, etc.
- Only modify files as explicitly requested.
